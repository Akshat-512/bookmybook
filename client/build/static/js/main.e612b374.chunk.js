(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{33:function(e,a,t){e.exports=t(71)},38:function(e,a,t){},56:function(e,a,t){},57:function(e,a,t){},58:function(e,a,t){},59:function(e,a,t){},60:function(e,a,t){},62:function(e,a,t){},63:function(e,a,t){},64:function(e,a,t){},65:function(e,a,t){},71:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),l=t(30),s=t.n(l),c=t(12),r=t(15),i=t(1),m=(t(38),function(){return o.a.createElement("div",{className:"container "},o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("div",{className:"notification is-dark homediv"},o.a.createElement("label",{className:"label is-large"},o.a.createElement("i",{className:"fas fa-book"})," Book-my-Book"),o.a.createElement("p",{className:"is-light is-medium"},"Have extra books lying around or want some new books to read? Our platform allows you to post your books and borrow from your college-mates! You post your books and are able to search through books posted in your college. You then create a social contract with the other user swapping books. Once communication begins you\u2019re ready to enjoy your new books after pick up!"),o.a.createElement("br",null),o.a.createElement("div",{className:"buttons is-centered"},o.a.createElement("a",{className:"button is-success is-medium",href:"/login"},"Login"),o.a.createElement("a",{className:"button is-success is-medium is-inverted is-outlined",id:"signupbutton",href:"/signup"},"Sign up"))))}),u=t(7),d=t.n(u),b=o.a.createContext({jwt:"",setJwt:function(){}}),h=function(e){var a=Object(n.useState)(""),t=Object(c.a)(a,2),l=t[0],s=t[1],r=Object(n.useState)(""),i=Object(c.a)(r,2),m=i[0],u=i[1],h=Object(n.useContext)(b);return o.a.createElement("div",{className:"section"},o.a.createElement("form",{className:"container is-dark formcontainer",onSubmit:function(a){a.preventDefault(),d.a.post("/api/login",{email:l,password:m}).then((function(a){console.log(a.config),h.handleLogin(a.data.data.token,a.data.data._id),e.history.push("/account/".concat(a.data.data._id))})).catch((function(e){console.log(e),alert("400 error message- invalid email or password")}))}},o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label is-large"},"Welcome back"),o.a.createElement("div",{className:"control has-icons-left has-icons-right"},o.a.createElement("input",{className:"input",id:"email",type:"email",name:"email",value:l,onChange:function(e){s(e.target.value)},placeholder:"Email"}),o.a.createElement("span",{className:"icon is-small is-left"},o.a.createElement("i",{className:"fas fa-envelope"})),o.a.createElement("span",{className:"icon is-small is-right"},o.a.createElement("i",{className:"fas fa-check"})))),o.a.createElement("div",{className:"field"},o.a.createElement("div",{className:"control has-icons-left"},o.a.createElement("input",{className:"input",id:"password",type:"password",name:"password",value:m,onChange:function(e){u(e.target.value)},placeholder:"Password"}),o.a.createElement("span",{className:"icon is-small is-left"},o.a.createElement("i",{className:"fas fa-lock"})))),o.a.createElement("div",{className:"buttons is-centered"},o.a.createElement("button",{className:"button is-success",type:"submit"},"Login"),o.a.createElement("a",{className:"button is-success is-outlined is-inverted",href:"/"},"Home"))))},p=t(3),f=t(4),v=t(6),E=t(5),k=(t(56),t(57),function(e){Object(v.a)(t,e);var a=Object(E.a)(t);function t(){return Object(p.a)(this,t),a.apply(this,arguments)}return Object(f.a)(t,[{key:"render",value:function(){return console.log("NAV",window.location),o.a.createElement("div",null,o.a.createElement("nav",{className:"navbar is-dark is-fixed-top",role:"navigation","aria-label":"main navigation"},o.a.createElement("div",{className:"navbar-brand"},o.a.createElement("label",{className:"label is-large ml-4"},o.a.createElement("i",{className:"fas fa-book"})," Book-my-Book")),o.a.createElement("div",{id:"navbarBasicExample",class:"navbar-menu"},o.a.createElement("div",{className:"navbar-end is-link"},o.a.createElement("a",{className:"navbar-item is-light",href:"javascript:history.back()"},"My Account Page"),o.a.createElement("a",{className:"navbar-item is-light",href:"/"},"Log Out")))))}}]),t}(n.Component)),g=(t(58),function(e){return console.log(e),d.a.get("/api/users/".concat(e))}),N=function(e,a){return console.log(e),d.a.put("/api/users/added/".concat(e),a)},y=function(e){return console.log(e),d.a.delete("/api/books/".concat(e))},w=function(e,a){return console.log(e),console.log(a),d.a.put("/api/books/".concat(e),{userId:a})},j=function(){return d.a.get("/api/books")},O=function(e,a){return console.log(e),console.log(a),d.a.put("/api/users/rent/".concat(e),{bookId:a})},C=function(e){Object(v.a)(t,e);var a=Object(E.a)(t);function t(){var e;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).book=e.props.book,e}return Object(f.a)(t,[{key:"rentBook",value:function(e){var a=this.props.user;console.log(this.props.user),console.log(e),w(e._id,a).then((function(e){console.log(e)})).catch((function(e){return console.log(e)})),this.props.onClose(),window.location.href="mailto:".concat(e.owner.email,"?subject=Rental%20Request%3A%20").concat(e.title,"&body=Hello%20").concat(e.owner.username,"!%0D%0A%0D%0AI%20have%20sent%20a%20request%20to%20rent%20your%20book%2C%20").concat(e.title,".%20Look%20forward%20to%20hearing%20from%20you%20soon!%0D%0A%0AThanks%2C%0D%0A%22YOUR SIGNATURE HERE%22")}},{key:"render",value:function(){var e=this;return console.log("Rent this book",this.book),o.a.createElement("div",{className:"modal is-active"},o.a.createElement("div",{className:"modal-background",onClick:function(){return e.props.onClose()}}),o.a.createElement("div",{className:"modal-card"},o.a.createElement("header",{className:"modal-card-head"},o.a.createElement("p",{className:"modal-card-title"},"Book Preview"),o.a.createElement("button",{className:"delete modal-card-title","aria-label":"close",onClick:function(){return e.props.onClose()}})),o.a.createElement("section",{className:"modal-card-body"},o.a.createElement("img",{src:this.book.image,alt:this.book.title,className:"book-cover mr-4",style:{float:"left"}}),o.a.createElement("p",{className:"title is-3"},this.book.title),o.a.createElement("br",null),o.a.createElement("p",{className:"subtitle is-5"},"Author(s): ",this.book.authors.join(", ")),o.a.createElement("br",null),o.a.createElement("p",{className:"has-text-justified"},o.a.createElement("strong",null,"Description:")," ",this.book.description),o.a.createElement("br",null)),o.a.createElement("footer",{className:"modal-card-foot"},o.a.createElement("button",{className:"button is-danger",onClick:function(){return e.rentBook(e.book)}},"Request To Rent"))))}}]),t}(n.Component),B=(t(59),function(e){Object(v.a)(t,e);var a=Object(E.a)(t);function t(){var e;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).state={showModal:!1},e.book=e.props.book,e}return Object(f.a)(t,[{key:"toggleModal",value:function(){this.setState({showModal:!this.state.showModal})}},{key:"render",value:function(){var e=this;return console.log(this.props.user),o.a.createElement("div",{className:"box bookbox"},o.a.createElement("img",{className:"is-clickable",src:this.book.image,alt:this.book.title,onClick:function(){return e.toggleModal()}}),o.a.createElement("div",{className:"middle"},o.a.createElement("button",{className:"button is-link",onClick:function(){return e.toggleModal()}},"Rent Book")),this.state.showModal&&o.a.createElement(C,{user:this.props.user,book:this.book,onClose:this.toggleModal.bind(this)}))}}]),t}(n.Component)),S=function(e){Object(v.a)(t,e);var a=Object(E.a)(t);function t(){var e;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).state={allOwnedBooks:[]},e}return Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props.match.params.id),j().then((function(a){var t=a.data;e.setState({allOwnedBooks:t})}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(k,null),o.a.createElement("div",{className:"section nearby"},o.a.createElement("div",{className:"container is-fluid bookContainer"},o.a.createElement("div",{className:"columns bookrow level"},this.state.allOwnedBooks.map((function(a){return o.a.createElement("div",{className:"bookcover level-item"},o.a.createElement(B,{user:e.props.match.params.id,book:a}))})))),o.a.createElement("div",{className:"polygon"}),o.a.createElement("div",{className:"container is-fluid browsehero"},o.a.createElement("section",{class:"hero is-dark"},o.a.createElement("div",{class:"hero-body"},o.a.createElement("div",{class:"container"},o.a.createElement("h1",{class:"title"},"Browse books around you"),o.a.createElement("h2",{class:"subtitle"},"Request a book to contact the owner")))))))}}]),t}(n.Component),x=(t(60),function(e){var a=Object(n.useState)(""),t=Object(c.a)(a,2),l=t[0],s=t[1],r=Object(n.useState)(""),i=Object(c.a)(r,2),m=i[0],u=i[1],b=Object(n.useState)(""),h=Object(c.a)(b,2),p=h[0],f=h[1],v=Object(n.useState)(""),E=Object(c.a)(v,2),k=E[0],g=E[1];return o.a.createElement("div",{className:"section"},o.a.createElement("form",{onSubmit:function(a){a.preventDefault(),console.log("you clicked submit"),d.a.post("/api/users",{username:l,email:m,zipCode:p,password:k}).then((function(a){console.log(a.data),e.history.push("/account/".concat(a.data._id))})).catch((function(e){console.log(e),alert("This is a 400 error- this email is already being used")}))},className:"container formcontainer"},o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label is-medium"},"Username"),o.a.createElement("div",{className:"control has-icons-left"},o.a.createElement("input",{className:"input",id:"username",type:"text",name:"username",value:l,onChange:function(e){s(e.target.value)},placeholder:"Text input"}),o.a.createElement("span",{className:"icon is-small is-left"},o.a.createElement("i",{className:"fas fa-user"})))),o.a.createElement("label",{className:"label is-medium"},"Email"),o.a.createElement("div",{className:"field"},o.a.createElement("div",{className:"control has-icons-left"},o.a.createElement("input",{className:"input",id:"email",type:"email",name:"email",value:m,onChange:function(e){u(e.target.value)},placeholder:"Email"}),o.a.createElement("span",{className:"icon is-small is-left"},o.a.createElement("i",{className:"fas fa-envelope"})))),o.a.createElement("label",{className:"label is-medium"},"Password"),o.a.createElement("div",{className:"field"},o.a.createElement("div",{className:"control has-icons-left"},o.a.createElement("input",{className:"input",id:"password",type:"password",name:"password",value:k,onChange:function(e){g(e.target.value)},placeholder:"Password"}),o.a.createElement("span",{className:"icon is-small is-left"},o.a.createElement("i",{className:"fas fa-lock"})))),o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label is-medium"},"Zip Code"),o.a.createElement("div",{className:"control has-icons-left"},o.a.createElement("input",{className:"input",id:"zipCode",type:"text",name:"zipCode",value:p,onChange:function(e){f(e.target.value)},placeholder:"Zip Code"}),o.a.createElement("span",{className:"icon is-small is-left"},o.a.createElement("i",{className:"fas fa-home"})))),o.a.createElement("div",{className:"buttons is-centered"},o.a.createElement("button",{className:"button is-success is-medium",type:"submit"},"Sign Up"),o.a.createElement("a",{className:"button is-success is-inverted is-outlined is-medium",href:"/"},"Back"))))}),A=t(17),R=t.n(A),M=t(31),I={get:d.a.get,post:d.a.post,delete:d.a.delete};function _(e){return I.get("https://www.googleapis.com/books/v1/volumes?q=".concat(e))}t(62);var L=function(e){Object(v.a)(t,e);var a=Object(E.a)(t);function t(){var e;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).state={searchValue:"",booksSearched:[]},e.handleSearch=function(a){e.setState({searchValue:a.currentTarget.value})},e.handleSearchAPI=Object(M.a)(R.a.mark((function a(){var t,n,o;return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,_(e.state.searchValue);case 2:t=a.sent,n=t.data,console.log(n),o=[],n.items.forEach((function(e,a){var t={authors:e.volumeInfo.authors,title:e.volumeInfo.title,description:e.volumeInfo.description,rating:e.volumeInfo.averageRating,image:void 0!==e.volumeInfo.imageLinks?e.volumeInfo.imageLinks.thumbnail:"https://via.placeholder.com/150/cecece/000000/?text=No+Thumbnail",link:e.volumeInfo.link};console.log(t),o.push(t)})),e.setState({booksSearched:o});case 8:case"end":return a.stop()}}),a)}))),e}return Object(f.a)(t,[{key:"saveBook",value:function(e){var a=this;console.log(this.props.match.params.id),N(this.props.match.params.id,e).then((function(e){console.log(e),console.log(e.data._id),a.props.history.push("/account/".concat(e.data._id))})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(k,null),o.a.createElement("div",{className:"section"},o.a.createElement("div",{className:"container formcontainer"},o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label is-medium"},"Add books you own to your library"),o.a.createElement("div",{className:"control has-icons-left"},o.a.createElement("input",{className:"input",type:"text",placeholder:"Title...",value:this.state.searchValue,onChange:this.handleSearch}),o.a.createElement("span",{className:"icon is-small is-left"},o.a.createElement("i",{className:"fas fa-book"})))),o.a.createElement("button",{className:"button is-success is-outlined",onClick:this.handleSearchAPI},"Search"))),o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"jumbotron"},this.state.booksSearched.map((function(a){return o.a.createElement("div",{className:"section books"},o.a.createElement("div",{className:"columns"},o.a.createElement("div",{className:"column"},o.a.createElement("div",{className:"title"},a.title),o.a.createElement("div",{className:"subtitle"},"Written By: ",a.authors.join(", "),o.a.createElement("div",null,o.a.createElement("button",{className:"button is-success is-medium addtolibrary",onClick:function(){return e.saveBook(a)}},"Add to Library"))))),o.a.createElement("img",{src:a.image,alt:"bookcoveradd"}),o.a.createElement("div",null,a.description))})))))}}]),t}(n.Component),D=(t(63),function(e){Object(v.a)(t,e);var a=Object(E.a)(t);function t(){var e;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).book=e.props.book,e}return Object(f.a)(t,[{key:"bookRented",value:function(e,a){console.log(a),console.log(e._id),O(a._id,e._id)}},{key:"deleteBook",value:function(e){var a=this;console.log(this.book._id),y(this.book._id).then((function(e){console.log(e),a.props.onClose(),window.location.reload()})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return console.log(this.book),o.a.createElement("div",{className:"modal is-active"},o.a.createElement("div",{className:"modal-background",onClick:function(){return e.props.onClose()}}),o.a.createElement("div",{className:"modal-card"},o.a.createElement("header",{className:"modal-card-head"},o.a.createElement("p",{className:"modal-card-title"},"Book Info"),o.a.createElement("button",{className:"delete modal-card-title","aria-label":"close",onClick:function(){return e.props.onClose()}})),o.a.createElement("section",{className:"modal-card-body"},o.a.createElement("img",{src:this.book.image,alt:this.book.title,className:"book-cover mr-4",style:{float:"left"}}),o.a.createElement("p",{className:"title is-3"},this.book.title),o.a.createElement("br",null),o.a.createElement("p",{className:"subtitle is-5"},"Author(s): ",this.book.authors.join(", ")),o.a.createElement("br",null),o.a.createElement("p",{className:"has-text-justified"},o.a.createElement("strong",null,"Description:")," ",this.book.description),o.a.createElement("br",null),!this.props.isRental&&o.a.createElement("p",{className:"buttons are-small"},o.a.createElement("strong",null,"Requesters:")," ",this.book.requesters.map((function(a){return o.a.createElement("button",{key:a._id,className:"button is-success is-outlined",onClick:function(){return e.bookRented(e.book,a)}},o.a.createElement("span",null,a.username))})))),o.a.createElement("footer",{className:"modal-card-foot"},!this.props.isRental&&o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"button is-danger",onClick:function(){return e.deleteBook(e.book)}},"Remove from Library"),o.a.createElement("button",{className:"button is-warning"},"Book Returned")))))}}]),t}(n.Component)),T=(t(64),function(e){Object(v.a)(t,e);var a=Object(E.a)(t);function t(){var e;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).state={showModal:!1},e.book=e.props.book,e}return Object(f.a)(t,[{key:"rentBook",value:function(e){var a=this.props.match.params;console.log("here"),w(e._id,a).then((function(e){console.log(e),console.log(e.data._id)})).catch((function(e){return console.log(e)}))}},{key:"toggleModal",value:function(){this.setState({showModal:!this.state.showModal})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"box bookbox"},o.a.createElement("img",{className:"is-clickable",src:this.book.image,alt:this.book.title,onClick:function(){return e.toggleModal()}}),o.a.createElement("div",{className:"middle"},o.a.createElement("button",{className:"button is-outlined is-medium",onClick:function(){return e.toggleModal()}},"Book Info")),this.state.showModal&&o.a.createElement(D,{book:this.book,isRental:this.props.isRental,onClose:this.toggleModal.bind(this)}))}}]),t}(n.Component)),P=(t(65),function(e){Object(v.a)(t,e);var a=Object(E.a)(t);function t(){var e;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).state={ownedBooks:[],renting:[]},e}return Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props.match.params.id),g(this.props.match.params.id).then((function(a){console.log("Owned Books",a.data.ownedBooks),console.log("Renting",a.data.renting),console.log(a.data);var t=a.data.ownedBooks,n=a.data.renting;e.setState({ownedBooks:t,renting:n})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(k,null),o.a.createElement("div",{className:"section accountSection"},o.a.createElement("section",{class:"hero is-dark"},o.a.createElement("div",{class:"hero-body"},o.a.createElement("div",{class:"container"},o.a.createElement("h1",{class:"title"},"Your Library"),o.a.createElement("h2",{class:"subtitle"},"Add books for others to rent"),o.a.createElement(r.b,{to:"/addbook/".concat(this.props.match.params.id)},o.a.createElement("button",{className:"button is-success is-large"},"Add Books"))))),o.a.createElement("div",{className:"container is-fluid bookContainer"},o.a.createElement("div",{className:"columns bookrow level"},this.state.ownedBooks.map((function(e){return o.a.createElement("div",{className:"bookcover level-item"},o.a.createElement(T,{key:e._id,book:e,isRental:!1}))})))),o.a.createElement("div",{className:"polygon"}),o.a.createElement("section",{class:"hero is-dark"},o.a.createElement("div",{class:"hero-body"},o.a.createElement("div",{class:"container"},o.a.createElement("h1",{class:"title"},"Borrowed Library"),o.a.createElement("h2",{class:"subtitle"},"The books you are currently borrowing"),o.a.createElement(r.b,{to:"/main/".concat(this.props.match.params.id),className:""}," ",o.a.createElement("button",{className:"button findbtn is-large"}," ","Find Books"))))),o.a.createElement("div",{className:"container is-fluid bookContainer"},o.a.createElement("div",{className:"columns borrowrow level"},this.state.renting.map((function(e){return o.a.createElement("div",{className:"bookcover level-item"},o.a.createElement(T,{book:e,isRental:!0}))})))),o.a.createElement("div",{className:"polygon"})))}}]),t}(n.Component));var q=function(){var e=Object(n.useState)(""),a=Object(c.a)(e,2),t=a[0],l=a[1],s=Object(n.useState)(""),u=Object(c.a)(s,2),d=u[0],p=u[1];Object(n.useEffect)((function(){f()}),[]);var f=function(){var e=window.localStorage.getItem("jwt");e&&l(e)};return o.a.createElement(r.a,null,o.a.createElement(i.c,null,o.a.createElement(b.Provider,{value:{jwt:t,_id:d,handleLogin:function(e,a){l(e),p(a),window.localStorage.setItem("jwt",e),window.localStorage.setItem("_id",a)}}},o.a.createElement("div",{className:"App"},o.a.createElement(i.a,{exact:!0,path:"/",component:m}),o.a.createElement(i.a,{exact:!0,path:"/login",component:h}),o.a.createElement(i.a,{exact:!0,path:"/main/:id",component:S}),o.a.createElement(i.a,{exact:!0,path:"/signup",component:x}),o.a.createElement(i.a,{exact:!0,path:"/addbook/:id",component:L}),o.a.createElement(i.a,{exact:!0,path:"/bookinfo",component:D}),o.a.createElement(i.a,{exact:!0,path:"/account/:id",component:P})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.e612b374.chunk.js.map